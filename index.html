<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆ‘çš„è®€ç¶“é€²åº¦è¡¨</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* ç°¡å–®ç¾è§€çš„ CSS è¨­å®š */
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #f0f2f5; margin: 0; padding: 20px; color: #333; }
        .container { max-width: 600px; margin: 0 auto; background: white; padding: 20px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        h1 { text-align: center; color: #2c3e50; margin-bottom: 30px; }
        
        /* è¼‰å…¥ä¸­çš„æç¤º */
        #loading { text-align: center; color: #666; }

        /* å¡ç‰‡æ¨£å¼ */
        .card { border-left: 5px solid #ddd; padding: 15px; margin-bottom: 15px; background: #fff; border-radius: 4px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); transition: transform 0.2s; }
        .card.today { border-left-color: #e74c3c; background-color: #fff5f5; border: 2px solid #e74c3c; } /* ä»Šå¤©çš„ç‰¹åˆ¥æ¨£å¼ */
        
        .date { font-size: 0.85em; color: #7f8c8d; letter-spacing: 1px; }
        .scripture { font-size: 1.2em; font-weight: bold; margin-top: 5px; color: #2c3e50; }
        .badge { display: inline-block; background: #e74c3c; color: white; font-size: 0.7em; padding: 2px 8px; border-radius: 10px; margin-left: 10px; vertical-align: middle; }
    </style>
</head>
<body>

<div class="container">
    <h1>ğŸ“– æ¯æ—¥è®€ç¶“è¨ˆç•«</h1>
    <div id="loading">æ­£åœ¨è®€å–é€²åº¦è¡¨...</div>
    <div id="content"></div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>

<script>
    // â–¼â–¼â–¼â–¼â–¼â–¼â–¼ è«‹å°‡ä¸‹æ–¹çš„ç¶²å€æ›æˆä½ çš„ Google Sheet CSV é€£çµ â–¼â–¼â–¼â–¼â–¼â–¼â–¼
    const sheetURL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRZRE4__MO8iWk0-3mNMmfm9WshlYpZWuw9D5YgqNDayuR5w6qeBvIt7tOXuloiRe-8TYPxwBjGXMTk/pub?output=csv'; 
    // â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²

    // å–å¾—ä»Šå¤©çš„æ—¥æœŸå­—ä¸² (æ ¼å¼ YYYY/M/D æˆ– YYYY-MM-DDï¼Œè¦–ä½ çš„ Excel è€Œå®š)
    const today = new Date();
    // é€™è£¡å°‡æ—¥æœŸæ ¼å¼åŒ–ç‚º YYYY/MM/DD ä»¥ä¾¿æ¯”å°
    const formattedToday = today.getFullYear() + '/' + 
                           String(today.getMonth() + 1).padStart(2, '0') + '/' + 
                           String(today.getDate()).padStart(2, '0');

    Papa.parse(sheetURL, {
        download: true,
        header: true,
        complete: function(results) {
            const data = results.data;
            displayData(data);
        },
        error: function(err) {
            document.getElementById('loading').innerText = 'è®€å–å¤±æ•—ï¼Œè«‹æª¢æŸ¥ç¶²å€è¨­å®š';
        }
    });

    function displayData(data) {
        const contentDiv = document.getElementById('content');
        document.getElementById('loading').style.display = 'none'; // éš±è—è¼‰å…¥ä¸­æ–‡å­—

        // åè½‰è³‡æ–™ï¼Œè®“ä»Šå¤©çš„é¡¯ç¤ºåœ¨ä¸Šé¢ (å¯é¸)
        // data.reverse(); 

        data.forEach(row => {
            // ç¢ºä¿é€™ä¸€è¡Œæœ‰è³‡æ–™
            if(row.Date && row.Scripture) {
                // åˆ¤æ–·æ˜¯å¦ç‚ºä»Šå¤© (é€™éœ€è¦ä½ çš„ Excel æ—¥æœŸæ ¼å¼è·Ÿç¨‹å¼å°ä¸Šï¼Œå¦‚æœå°ä¸ä¸Šï¼Œä¸æœƒäº®ç´…ç‡ˆä½†ä¾ç„¶æœƒé¡¯ç¤º)
                // é€™è£¡åšå€‹ç°¡å–®çš„æ¨¡ç³Šæ¯”å°
                let isToday = row.Date.includes(formattedToday) || row.Date.includes(today.toISOString().split('T')[0]);
                
                let todayBadge = isToday ? '<span class="badge">ä»Šæ—¥é€²åº¦</span>' : '';
                let cardClass = isToday ? 'card today' : 'card';

                contentDiv.innerHTML += `
                    <div class="${cardClass}">
                        <div class="date">${row.Date} ${todayBadge}</div>
                        <div class="scripture">${row.Scripture}</div>
                    </div>
                `;
            }
        });
    }
</script>

</body>
</html>
